
#:import hex kivy.utils.get_color_from_hex
#:import Button kivy.uix.button.Button
#:import Factory kivy.factory.Factory
#:import random random.random
#from kivy.utils import get_color_from_hex

                
ScreenManager:
    Screen:
        name: 'MainScreen'
        MDBoxLayout:
            orientation: "vertical"
            MDTopAppBar:
                Image:
                    source: "logo.png"
                    size_hint: None, None
                    size: 80, 80
                    pos_hint: {"center_x": .5}
            MDBottomNavigation:
                MDBottomNavigationItem:
                    id: screen1
                    name: 'MainScreen'
                    text: 'Workouts'
                    icon: 'weight-lifter'
                    #Excersises:
                    MDBoxLayout:
                        orientation: 'vertical'
                        GridLayout:
                            cols: 4
                            size_hint_y: 0.1
                            MDIconButton:
                                id: sort_AZ_asc_button
                                opacity: 0
                                disabled: True
                                icon: 'sort-alphabetical-ascending'
                                theme_icon_color: "Custom"
                                icon_color: app.theme_cls.primary_color
                                pos_hint: {'center_x': .9, 'center_y': .9}
                                size_hint: .2, .1
                                on_release: app.sort_exercises("AZ_asc")
                            MDIconButton:
                                id: sort_AZ_des_button
                                opacity: 0
                                disabled: True
                                icon: 'sort-alphabetical-descending'
                                theme_icon_color: "Custom"
                                icon_color: app.theme_cls.primary_color
                                pos_hint: {'center_x': .9, 'center_y': .9}
                                size_hint: .2, .1
                                on_release: app.sort_exercises("AZ_des")
                            MDIconButton:
                                id: sort_filler_button
                                icon: 'filter'
                                theme_icon_color: "Custom"
                                icon_color: app.theme_cls.primary_color
                                pos_hint: {'center_x': .9, 'center_y': .9}
                                size_hint: .2, .1
                                on_release: app.visibility_handler([sort_AZ_asc_button, sort_AZ_des_button])
                            MDIconButton:
                                id: edit_button
                                icon: 'circle-edit-outline'
                                theme_icon_color: "Custom"
                                icon_color: app.theme_cls.primary_color
                                pos_hint: {'center_x': .9, 'center_y': .9}
                                size_hint: .2, .1
                                on_release: app.visibility_handler([addExercise_button, exercise_name_input]), app.edit_button_handler()
                        ScrollView:
                            id: exercise_scroll
                            MDBoxLayout:
                                id: exercise_box
                                orientation: 'vertical'
                                size_hint_y: None
                                height: self.minimum_height
                        GridLayout:
                            cols: 2
                            size_hint_y: 0.15
                            MDTextField:
                                hint_text: "Add your exercise"
                                id: exercise_name_input
                                mode: "rectangle"
                                max_text_length: 20
                                size_hint_y: None
                            MDIconButton:
                                id: addExercise_button
                                icon: 'plus-circle-outline'
                                icon_color: app.theme_cls.primary_color
                                on_release: app.add_new_widget(exercise_name_input.text), app.reset_input(exercise_name_input)
                                size_hint_y: None
                MDBottomNavigationItem:
                    name: 'Encyclopedia'
                    text: 'Encyclopedia'
                    icon: 'book-open-page-variant'
                    MDLabel:
                        text: 'Encyclopedia'
                        halign: 'center'
                MDBottomNavigationItem:
                    name: 'Progress'
                    text: 'Progress'
                    icon: 'chart-line'
                    MDLabel:
                        text: 'Progress'
                        halign: 'center'
                MDBottomNavigationItem:
                    name: 'Settings'
                    text: 'Settings'
                    icon: 'cog-outline'
                    MDLabel:
                        text: 'Settings'
                        halign: 'center'
                MDBottomNavigationItem:
                    name: 'Ustawienia'
                    text: 'Ustawienia'
                    icon: 'tools'
                    MDLabel:
                        MDBoxLayout:
                            id:box
                            md_bg_color: "#3A3E59"
                            spacing: 15 
                            padding: 15

                            orientation: "vertical"

                            MDLabel:
                                theme_text_color: "Custom"
            
                                id: lb1
                                text: "Kalkulator walut"

                            MDLabel:

                                theme_text_color: "Custom"
                                text_color: 0, 0, 1, 1
                                id: lb2
                                text: "abcd"

                            MDLabel:
            
                                id: lb3
                                text: "Euro"

                            TextInput:

                                id: tp
                                multiline: False
                                hint_text: "Wartość"
                                size_hint: .7, .30

                            Button:

                                id: btn1
                                text: "Przelicz"
                                size_hint: .7, .30
                                pos: root.width /2-self.width/2, root.top/2-150
        
                                on_release:
                                    root.acc.setBalance(int(tp.text))
                                    root.update_balance()


    Screen:
        name: 'ExerciseScreen'
        MDBoxLayout:
            orientation: "vertical"

            MDTopAppBar:
                id: exercise_screen_top_app_bar_title
                title: ""
            GridLayout:
                cols: 4
                size_hint_y: 0.1
                MDIconButton:
                    id: calendarAscendingButton
                    opacity: 0
                    disabled: True
                    icon: 'sort-calendar-ascending'
                    theme_icon_color: "Custom"
                    icon_color: app.theme_cls.primary_color
                    pos_hint: {'center_x': .9, 'center_y': .9}
                    size_hint: .2, .1
                MDIconButton:
                    id: calendarDescendingButton
                    opacity: 0
                    disabled: True
                    icon: 'sort-calendar-descending'
                    theme_icon_color: "Custom"
                    icon_color: app.theme_cls.primary_color
                    pos_hint: {'center_x': .9, 'center_y': .9}
                    size_hint: .2, .1
                MDIconButton:
                    id: sort_filler_button
                    icon: 'filter'
                    theme_icon_color: "Custom"
                    icon_color: app.theme_cls.primary_color
                    pos_hint: {'center_x': .9, 'center_y': .9}
                    size_hint: .2, .1
                    on_release: app.visibility_handler([calendarAscendingButton, calendarDescendingButton])
                MDIconButton:
                    id: edit_button_exercise_screen
                    icon: 'circle-edit-outline'
                    theme_icon_color: "Custom"
                    icon_color: app.theme_cls.primary_color
                    pos_hint: {'center_x': .9, 'center_y': .9}
                    size_hint: .2, .1
                    on_release: app.visibility_handler([exercise_screen_grid])
            ScrollView:
                id: exercise_screen_scroll
                MDBoxLayout:
                    id: exercise_screen_box
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
            
            GridLayout:
                size_hint_y: 0.4
                id: exercise_screen_grid
                opacity: 0
                disabled: True
                rows: 2
                GridLayout:
                    rows: 1
                    cols: 1
                    size_hint_y: 0.15
                    pos_hint_y: 0.15
                    MDTextField:
                        id: exercise_notes_input_exercise_screen
                        hint_text: "notes"
                        max_height: "125dp"
                        mode: "rectangle"
                        multiline: True
                GridLayout:
                    rows: 1
                    cols: 7
                    size_hint_y: 0.15
                    MDLabel:
                        size_hint_x: 0.2
                        MDIconButton:
                            icon: 'arrow-left'
                            on_release: app.screen_change("MainScreen",reset=True,returnBtn=False)
                    MDRaisedButton:
                        text: "Date"
                        on_release: app.show_date_picker()
                    MDTextField:
                        size_hint_x: 0.6
                        hint_text: "Nmber of reps"
                        id: exercise_reps_input_exercise_screen
                        size_hint_y: None
                        input_filter: 'int'
                    MDLabel:
                        size_hint_x: 0.1
                    MDTextField:
                        size_hint_x: 0.6
                        hint_text: "Nmber of sets"
                        id: exercise_sets_input_exercise_screen
                        size_hint_y: None
                        input_filter: 'int'
                    MDSwitch:
                        id: exercise_dirty_exercise_screen
                        
                    MDIconButton:
                        id: addExercise_button_exercise_screen
                        icon: 'plus-circle-outline'
                        icon_color: app.theme_cls.primary_color
                        on_release: app.add_new_widget_exercise_screen(exercise_screen_top_app_bar_title.title,exercise_reps_input_exercise_screen.text,exercise_sets_input_exercise_screen.text,exercise_dirty_exercise_screen.active,"0"), app.reset_input([exercise_reps_input_exercise_screen,exercise_sets_input_exercise_screen,exercise_dirty_exercise_screen])
                        size_hint_y: None
                
                   
                    